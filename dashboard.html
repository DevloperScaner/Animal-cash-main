<!DOCTYPE html><html lang="id"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dashboard — Animals Cash</title>
<link rel="stylesheet" href="./css/styles.css"/>
</head><body>
<div class="app">
  <header class="topbar">
    <div class="brand">PETERNAKAN HEWAN</div>
    <div style="display:flex;gap:8px;align-items:center">
      <a id="adminLink" class="btn" href="./admin/index.html" style="display:none">Admin</a>
      <button id="logoutBtn" class="btn red" type="button">Logout</button>
    </div>
  </header>
  <main class="content">
    <section class="card banner"><div class="banner-inner"><div class="slide">Promo</div><div class="slide">Referral Bonus</div></div></section>
    <section class="card" style="margin-top:12px">
      <h3>Menu</h3>
      <div class="swipe-grid">
        <section class="page"><div class="icon-grid">
          <a class="tile" href="./farm.html"><div class="icon">🐮</div><div class="label">Farm</div></a>
          <a class="tile" href="./invite/index.html"><div class="icon">🤝</div><div class="label">Mengundang</div></a>
          <a class="tile" href="./withdraw.html"><div class="icon">💳</div><div class="label">Menarik</div></a>
          <a class="tile" href="./profile.html"><div class="icon">👤</div><div class="label">Aku</div></a>
        </div></section>
        <section class="page"><div class="icon-grid">
          <a class="tile" href="./history.html"><div class="icon">🧾</div><div class="label">Riwayat</div></a>
          <a class="tile" href="./holdings.html"><div class="icon">📦</div><div class="label">Ringkasan Farm</div></a>
          <a class="tile" href="./settings.html"><div class="icon">⚙️</div><div class="label">Pengaturan</div></a>
        </div></section>
      </div>
    </section>
  </main>
  <nav class="tabbar">
    <a href="./dashboard.html" class="tab active">🏠<span>Home</span></a>
    <a href="./farm.html" class="tab">🐮<span>Farm</span></a>
    <a href="./invite/index.html" class="tab">🤝<span>Invite</span></a>
    <a href="./profile.html" class="tab">👤<span>Aku</span></a>
  </nav>
</div>
<script type="module">
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
import { app } from "./shared/firebase.js";
const auth = getAuth(app);
onAuthStateChanged(auth, async (u)=>{
  if(!u){ location.replace("./login.html"); return; }
  // cek role admin untuk menampilkan tombol admin
  const db = getFirestore(app);
  try{
    const snap = await getDoc(doc(db,"users", u.uid));
    const role = snap.exists() ? (snap.data().role||"user") : "user";
    if(role==="admin") document.getElementById("adminLink").style.display="inline-block";
  }catch(e){ /* ignore */ }
});
document.getElementById("logoutBtn").addEventListener("click", async ()=>{
  await signOut(auth);
  location.replace("./login.html");
});
</script>
</body></html>