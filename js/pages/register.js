import{auth,db,createUserWithEmailAndPassword,updateProfile,doc,setDoc}from"../../shared/firebase.js";import{boot}from"../app.js";boot();function c(e=6){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:e},()=>t[Math.floor(Math.random()*t.length)]).join("")}document.getElementById("btnReg").addEventListener("click",async()=>{const e=document.getElementById("email").value.trim(),t=document.getElementById("pass").value,a=(document.getElementById("name").value.trim()||"User");try{const r=await createUserWithEmailAndPassword(auth,e,t);await updateProfile(r.user,{displayName:a});await setDoc(doc(db,"users",r.user.uid),{name:a,email:e,role:"user",verified:false,balance:0,referralCode:c(),createdAt:new Date});localStorage.setItem("showLoaderOnNext","1"),location.href="dashboard.html"}catch(l){alert(l.message)}});